apiVersion: v1
data:
  .dockerconfigjson: eyJhdXRocyI6eyJodHRwczovL2djci5pbyI6eyJ1c2VybmFtZSI6Il9qc29uX2tleSIsInBhc3N3b3JkIjoie1xuICBcInR5cGVcIjogXCJzZXJ2aWNlX2FjY291bnRcIixcbiAgXCJwcm9qZWN0X2lkXCI6IFwia2x1c3Rlcm5ldGVzLWRldlwiLFxuICBcInByaXZhdGVfa2V5X2lkXCI6IFwiNGMxNTczZjRlNDE1ZjZhMTI5YWEwOWVkMDM1OTFiOTEzZTJmY2NiYlwiLFxuICBcInByaXZhdGVfa2V5XCI6IFwiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXFxuTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDZUR4TVU0WTY3U3dGQ1xcbjJtaitiMHROQVROeld1QU1KL2RoZTFOSVBHVzhXSDZiL1p0ZG92UGdHN2VBN1NubkxZem5iSnF2aDFhTTd0bktcXG5ReW9icGV5UmtwbXBMK1VkQWY1cWk2UjFtK3NOOG02U3Zsd3BFQmR5dVhFR3VxQ3R1UmZEajZjTlhrajJUbmNBXFxucVBtUjhuZjkwSHR2eWc0K3RGdVZOemxiTkhVd2dLQmVvMS9ZakFtWktjOG9UYVFPbjdYcGRhbklXTUVPMElpVVxcbmd1SFhOZWRsQ0NFQk9jNi92K1YzWGNQdTdFQ2RjQ3dJcG9TbzA3U29pYmVSVlJDT3NtZS9IRmI1L0xKTnJXcHFcXG43aThUbXJNdWRGWGpVeDFzV0wyYkNwNFFtaWFCSFhBcTdzQ1ZRNmQzS0ZGOVk1RFBrYTNXekRtK0hVd0VWMEFNXFxuMGFxNFhJVEJBZ01CQUFFQ2dnRUFRY1VIRFNUUWRqbi9NOWpiWUtoaC9wQjEzdFhkTGVIQmpCUTdzdTdDN0swc1xcblBlKzVJeTBINnVUTnBuM0pkbk5iVXY4N25MZWx1YTQzL1BTV3hIdDJKWnNKaXIrdHlEVElyNEFjOW4xalFXSDBcXG5SZWFsUmNiMjR0dXNYdjd3bG1sVExLS05na0FOLzBQbU8rV1VOL2xibWNlVFhaQ0gvZXFodzBULy9tWWxMNEZtXFxudzlTa2kyVVo5Q3dnR1JHeXZhUXh1RHZteThkT20xQ2V0Zk9SbHZzSVVMVGM4cURoRldRLzRCRjV3QUpPMjhDMVxcbjg2ODVyS3ExdkFHdnBnRTZRWFhiMmQrMVBaQmRycCtGTm14aXhaSXE2bVJ4U25NM1dLK2EyUXBGV0hQRE5CYXRcXG4wRklLUk5JTmQrNHU1bEV0RHhKMjhDZzhkUjBqRUNBN29BbjJLNmdrZXdLQmdRRFZyQW9sOWxpVVplazZ6QlNjXFxud2d0S2xWK2haMmhKTmNyc0dLYWF5MlQrQnkzaTFXbUI1eEhXWmwwK3J1dGNJUy9DMUZRVEUvcG5lN210RkFJNlxcbmJZNzJ6ZnAzeHdFT3dPek0wMDZ6bUNla0krR1VGeWx1dXZrSkN0cWVZem9LRUdsTHBJaU9zQjBPUXByS0hxZE1cXG4zWTl1ZUVNQ0hOMXhYT2hZekl5cVNiTzlKd0tCZ1FDOVhya0NLTkVNLzBPUDdFQmFQUllmUFVKbTgxOTRqMTdsXFxuR0U4TmRwTFF6Vm1lbHUwSWV0bHg3OE0xVENHcVVNaE9ZK0crZ2YyVnR1TnlzcGt5ajZDaENudUdoZDBWekxkcVxcbjNpakRLUTUzeEZaN3VLa05rV0NTeHNpZ0dnaXhvSEhQM244M1hWYjZnL3psOEdaRjR0OFBBM0syN01VNzJvOGdcXG54bEkrMGUydjF3S0JnUUNaZndXclQ5VkNoaE9PVVoxZEgyak5JNUdYZVpuSlBnT1FxQVRIbnVYbU4zSVhTZ2lKXFxuY1YyM0Q4SmNqWHcycXdDTWpjdjRDSm9TVFNlTjFwbmpMMkZNbTV3YS83TWF6aTFPMTEzcVZwdmpwb01leDZUVVxcbkR5MW4rWXdqekZTZGRqeXVRbngzUkwwYXlXNDVWTndLcy8rZDlIYnV4WjJ2R25jdms0SlpzcWlVY1FLQmdINEFcXG54QXVLeXliaHhydkNFRU82OTdoTGs1NWErOENGYlRmMHg4MEdnOFFKajBNMTIzeFQrZEdWSG9lZEk1MW02UkUzXFxuNXFKVGJqOHJGUVpoamd3VmcyVUVTNU1FQ1VxVEQ4dzlERlJuUWlndzdQYWZ0V1RBd2NpSUdrQmxjamwycjZRSFxcbndSQSt2RHd1akowWEs0WCs0anJrS1hWTDhDVFdWWHdTV2ZGUXo5MjdBb0dCQUlpcXZGTUxBYWxiK2NDS1ZqV3RcXG5jSWhaM3h3K2g1Q3NEcW9NZHdyNTIyaG1RaHAzTUtVUUhhd0FPMXBCZHBZYk5jNGM2d2RQR3pGUTg1Q3RxbDc5XFxudmRZQ1JySEMwdksvMUpTdUpmQkhlSGM3R1FNZGNYc0Q4OTZDM3FlTjVkUnNVMXdGd1AydjVVYS9nYmdQSG16bVxcbnJOTGVIMTFDZlJxQUVFRTR0OGdlSDdrWFxcbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cXG5cIixcbiAgXCJjbGllbnRfZW1haWxcIjogXCJpbWFnZS1wdXNoLXNhQGtsdXN0ZXJuZXRlcy1kZXYuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb21cIixcbiAgXCJjbGllbnRfaWRcIjogXCIxMDYxNjc3OTE5ODA0MjAyMDM1NDNcIixcbiAgXCJhdXRoX3VyaVwiOiBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoXCIsXG4gIFwidG9rZW5fdXJpXCI6IFwiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW5cIixcbiAgXCJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmxcIjogXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHNcIixcbiAgXCJjbGllbnRfeDUwOV9jZXJ0X3VybFwiOiBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvaW1hZ2UtcHVzaC1zYSU0MGtsdXN0ZXJuZXRlcy1kZXYuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb21cIlxufSIsImF1dGgiOiJYMnB6YjI1ZmEyVjVPbnNLSUNBaWRIbHdaU0k2SUNKelpYSjJhV05sWDJGalkyOTFiblFpTEFvZ0lDSndjbTlxWldOMFgybGtJam9nSW10c2RYTjBaWEp1WlhSbGN5MWtaWFlpTEFvZ0lDSndjbWwyWVhSbFgydGxlVjlwWkNJNklDSTBZekUxTnpObU5HVTBNVFZtTm1FeE1qbGhZVEE1WldRd016VTVNV0k1TVRObE1tWmpZMkppSWl3S0lDQWljSEpwZG1GMFpWOXJaWGtpT2lBaUxTMHRMUzFDUlVkSlRpQlFVa2xXUVZSRklFdEZXUzB0TFMwdFhHNU5TVWxGZG1kSlFrRkVRVTVDWjJ0eGFHdHBSemwzTUVKQlVVVkdRVUZUUTBKTFozZG5aMU5yUVdkRlFVRnZTVUpCVVVObFJIaE5WVFJaTmpkVGQwWkRYRzR5YldvcllqQjBUa0ZVVG5wWGRVRk5TaTlrYUdVeFRrbFFSMWM0VjBnMllpOWFkR1J2ZGxCblJ6ZGxRVGRUYm01TVdYcHVZa3B4ZG1neFlVMDNkRzVMWEc1UmVXOWljR1Y1VW10d2JYQk1LMVZrUVdZMWNXazJVakZ0SzNOT09HMDJVM1pzZDNCRlFtUjVkVmhGUjNWeFEzUjFVbVpFYWpaalRsaHJhakpVYm1OQlhHNXhVRzFTT0c1bU9UQklkSFo1WnpRcmRFWjFWazU2YkdKT1NGVjNaMHRDWlc4eEwxbHFRVzFhUzJNNGIxUmhVVTl1TjFod1pHRnVTVmROUlU4d1NXbFZYRzVuZFVoWVRtVmtiRU5EUlVKUFl6WXZkaXRXTTFoalVIVTNSVU5rWTBOM1NYQnZVMjh3TjFOdmFXSmxVbFpTUTA5emJXVXZTRVppTlM5TVNrNXlWM0J4WEc0M2FUaFViWEpOZFdSR1dHcFZlREZ6VjB3eVlrTndORkZ0YVdGQ1NGaEJjVGR6UTFaUk5tUXpTMFpHT1ZrMVJGQnJZVE5YZWtSdEswaFZkMFZXTUVGTlhHNHdZWEUwV0VsVVFrRm5UVUpCUVVWRFoyZEZRVkZqVlVoRVUxUlJaR3B1TDAwNWFtSlpTMmhvTDNCQ01UTjBXR1JNWlVoQ2FrSlJOM04xTjBNM1N6QnpYRzVRWlNzMVNYa3dTRFoxVkU1d2JqTktaRzVPWWxWMk9EZHVUR1ZzZFdFME15OVFVMWQ0U0hReVNscHpTbWx5SzNSNVJGUkpjalJCWXpsdU1XcFJWMGd3WEc1U1pXRnNVbU5pTWpSMGRYTllkamQzYkcxc1ZFeExTMDVuYTBGT0x6QlFiVThyVjFWT0wyeGliV05sVkZoYVEwZ3ZaWEZvZHpCVUx5OXRXV3hNTkVadFhHNTNPVk5yYVRKVldqbERkMmRIVWtkNWRtRlJlSFZFZG0xNU9HUlBiVEZEWlhSbVQxSnNkbk5KVlV4VVl6aHhSR2hHVjFFdk5FSkdOWGRCU2s4eU9FTXhYRzQ0TmpnMWNrdHhNWFpCUjNad1owVTJVVmhZWWpKa0t6RlFXa0prY25BclJrNXRlR2w0V2tseE5tMVNlRk51VFROWFN5dGhNbEZ3UmxkSVVFUk9RbUYwWEc0d1JrbExVazVKVG1Rck5IVTFiRVYwUkhoS01qaERaemhrVWpCcVJVTkJOMjlCYmpKTE5tZHJaWGRMUW1kUlJGWnlRVzlzT1d4cFZWcGxhelo2UWxOalhHNTNaM1JMYkZZcmFGb3lhRXBPWTNKelIwdGhZWGt5VkN0Q2VUTnBNVmR0UWpWNFNGZGFiREFyY25WMFkwbFRMME14UmxGVVJTOXdibVUzYlhSR1FVazJYRzVpV1RjeWVtWndNM2gzUlU5M1QzcE5NREEyZW0xRFpXdEpLMGRWUm5sc2RYVjJhMHBEZEhGbFdYcHZTMFZIYkV4d1NXbFBjMEl3VDFGd2NrdEljV1JOWEc0eldUbDFaVVZOUTBoT01YaFlUMmhaZWtsNWNWTmlUemxLZDB0Q1oxRkRPVmh5YTBOTFRrVk5MekJQVURkRlFtRlFVbGxtVUZWS2JUZ3hPVFJxTVRkc1hHNUhSVGhPWkhCTVVYcFdiV1ZzZFRCSlpYUnNlRGM0VFRGVVEwZHhWVTFvVDFrclJ5dG5aakpXZEhWT2VYTndhM2xxTmtOb1EyNTFSMmhrTUZaNlRHUnhYRzR6YVdwRVMxRTFNM2hHV2pkMVMydE9hMWREVTNoemFXZEhaMmw0YjBoSVVETnVPRE5ZVm1JMlp5OTZiRGhIV2tZMGREaFFRVE5MTWpkTlZUY3liemhuWEc1NGJFa3JNR1V5ZGpGM1MwSm5VVU5hWm5kWGNsUTVWa05vYUU5UFZWb3haRWd5YWs1Sk5VZFlaVnB1U2xCblQxRnhRVlJJYm5WWWJVNHpTVmhUWjJsS1hHNWpWakl6UkRoS1kycFlkekp4ZDBOTmFtTjJORU5LYjFOVVUyVk9NWEJ1YWt3eVJrMXROWGRoTHpkTllYcHBNVTh4TVROeFZuQjJhbkJ2VFdWNE5sUlZYRzVFZVRGdUsxbDNhbnBHVTJSa2FubDFVVzU0TTFKTU1HRjVWelExVms1M1MzTXZLMlE1U0dKMWVGb3lka2R1WTNack5FcGFjM0ZwVldOUlMwSm5TRFJCWEc1NFFYVkxlWGxpYUhoeWRrTkZSVTgyT1Rkb1RHczFOV0VyT0VOR1lsUm1NSGc0TUVkbk9GRkthakJOTVRJemVGUXJaRWRXU0c5bFpFazFNVzAyVWtVelhHNDFjVXBVWW1vNGNrWlJXbWhxWjNkV1p6SlZSVk0xVFVWRFZYRlVSRGgzT1VSR1VtNVJhV2QzTjFCaFpuUlhWRUYzWTJsSlIydENiR05xYkRKeU5sRklYRzUzVWtFcmRrUjNkV3BLTUZoTE5GZ3JOR3B5YTB0WVZrdzRRMVJYVmxoM1UxZG1SbEY2T1RJM1FXOUhRa0ZKYVhGMlJrMU1RV0ZzWWl0alEwdFdhbGQwWEc1alNXaGFNM2gzSzJnMVEzTkVjVzlOWkhkeU5USXlhRzFSYUhBelRVdFZVVWhoZDBGUE1YQkNaSEJaWWs1ak5HTTJkMlJRUjNwR1VUZzFRM1J4YkRjNVhHNTJaRmxEVW5KSVF6QjJTeTh4U2xOMVNtWkNTR1ZJWXpkSFVVMWtZMWh6UkRnNU5rTXpjV1ZPTldSU2MxVXhkMFozVURKMk5WVmhMMmRpWjFCSWJYcHRYRzV5VGt4bFNERXhRMlpTY1VGRlJVVTBkRGhuWlVnM2ExaGNiaTB0TFMwdFJVNUVJRkJTU1ZaQlZFVWdTMFZaTFMwdExTMWNiaUlzQ2lBZ0ltTnNhV1Z1ZEY5bGJXRnBiQ0k2SUNKcGJXRm5aUzF3ZFhOb0xYTmhRR3RzZFhOMFpYSnVaWFJsY3kxa1pYWXVhV0Z0TG1kelpYSjJhV05sWVdOamIzVnVkQzVqYjIwaUxBb2dJQ0pqYkdsbGJuUmZhV1FpT2lBaU1UQTJNVFkzTnpreE9UZ3dOREl3TWpBek5UUXpJaXdLSUNBaVlYVjBhRjkxY21raU9pQWlhSFIwY0hNNkx5OWhZMk52ZFc1MGN5NW5iMjluYkdVdVkyOXRMMjh2YjJGMWRHZ3lMMkYxZEdnaUxBb2dJQ0owYjJ0bGJsOTFjbWtpT2lBaWFIUjBjSE02THk5dllYVjBhREl1WjI5dloyeGxZWEJwY3k1amIyMHZkRzlyWlc0aUxBb2dJQ0poZFhSb1gzQnliM1pwWkdWeVgzZzFNRGxmWTJWeWRGOTFjbXdpT2lBaWFIUjBjSE02THk5M2QzY3VaMjl2WjJ4bFlYQnBjeTVqYjIwdmIyRjFkR2d5TDNZeEwyTmxjblJ6SWl3S0lDQWlZMnhwWlc1MFgzZzFNRGxmWTJWeWRGOTFjbXdpT2lBaWFIUjBjSE02THk5M2QzY3VaMjl2WjJ4bFlYQnBjeTVqYjIwdmNtOWliM1F2ZGpFdmJXVjBZV1JoZEdFdmVEVXdPUzlwYldGblpTMXdkWE5vTFhOaEpUUXdhMngxYzNSbGNtNWxkR1Z6TFdSbGRpNXBZVzB1WjNObGNuWnBZMlZoWTJOdmRXNTBMbU52YlNJS2ZRPT0ifX19
kind: Secret
metadata:
  name: regcred
type: kubernetes.io/dockerconfigjson

---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: node-app
  name: node-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: node-app
  strategy: {}
  template:
    metadata:
      labels:
        app: node-app
    spec:
      containers:
      - image: gcr.io/klusternetes-dev/nodejs-sample:${{github.sha}}
        imagePullPolicy: Always
        name: nodejs-sample
      imagePullSecrets:
      - name: regcred                             
      serviceAccount: image-push-sa 
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: node-app
  name: node-app-svc
spec:
  ports:
  - port: 5858
    protocol: TCP
    targetPort: 5858
  selector:
    app: node-app
  type: NodePort
    
